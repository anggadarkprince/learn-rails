<% content_for :title do %> - <%= @author.name %>
<% end %>

<div class="jumbotron">
  <div class="container">
    <div class="d-block d-sm-flex text-center text-sm-left">
      <img class="mr-sm-3 mb-3" style="width: 90px; height: 90px;"
           src="/assets/avatars/<%= @author.avatar %>"
           data-holder-rendered="true">
      <div class="p-md-1">
        <h3 class="mb-3 mb-md-1">
          <span class="d-md-inline" hidden>Welcome back, </span>
          <strong><%= @author.name %>!</strong>
        </h3>
        <p class="d-md-block" hidden>
          <%= @author.about.nil? ? 'No story available' : @author.about %>
        </p>
        <% if !session[:is_authorized].nil? && @author.id == session[:authorized_id]  %>
            <a class="btn btn-primary" href="<%= new_article_path %>" role="button">
              Create New Post
            </a>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-lg-8 ml-lg-auto mr-lg-auto">

      <div class="row mb-4">
        <div class="col-6 mt-2">
          <h4><%= t(:menu_articles) %></h4>
        </div>
        <div class="col-6 text-right">
          <div class="dropdown">
            <button class="btn btn-outline-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <% if (params[:order_by] == 'popularity') %>
                  <%= t(:sort_popularity) %>
              <% else %>
                  <%= t(:sort_latest) %>
              <% end %>
            </button>
            <div class="dropdown-menu dropdown-menu-right">
              <h6 class="dropdown-header">Method</h6>
              <%
                if !session[:is_authorized].nil? && @author.id == session[:authorized_id] && params[:controller] == 'articles'
                  sort_latest = articles_path order_by: 'latest'
                  sort_popularity = articles_path order_by: 'popularity'
                else
                  sort_latest = profile_path username: @author.username, order_by: 'latest'
                  sort_popularity = profile_path username: @author.username, order_by: 'popularity'
                end
              %>
              <a class="dropdown-item" href="<%= sort_latest %>">
                <%= t(:sort_latest) %>
              </a>
              <a class="dropdown-item" href="<%= sort_popularity %>">
                <%= t(:sort_popularity) %>
              </a>
            </div>
          </div>
        </div>
      </div>

      <% if @articles.count == 0 %>
        <p>No articles available yet, <a href="<%= new_article_path %>">create new</a> one</p>
          <% content_for :footer_fixed do %> fixed-bottom
          <% end %>
      <% end %>

      <%= render partial: 'author/article', collection: @articles %>

      <%= paginate @articles %>

    </div>
  </div>
</div>

<div class="modal fade" id="dialog-delete">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete Article</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="lead">Are you sure want to delete this article?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="dialog-share">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Share Article</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-4">
            <a href="#" class="btn btn-primary btn-lg btn-block">Facebook</a>
          </div>
          <div class="col-sm-4">
            <a href="#" class="btn btn-info btn-lg btn-block">Twitter</a>
          </div>
          <div class="col-sm-4">
            <a href="#" class="btn btn-danger btn-lg btn-block">Google</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>